  <style type="text/css">

  	#map-canvas { height: 400px; display:inline-block;
  		width: 400px; margin:10px;}
  		.gmnoprint img {
  			max-width: none; 
  		}
  	</style>
  	<script type="text/javascript"
  	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCg38ejoS6k0WzzLIBM39H8gED-jUwDFrw&sensor=true">
  </script>
  <script type="text/javascript">
  	var map;
  	var markersArray = [];
  	function initialize() {
  		var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
  		var mapOptions = {
  			zoom: 10,
  			center: myLatlng,
  			mapTypeId: google.maps.MapTypeId.ROADMAP
  		}
  		map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

  		if (navigator.geolocation) {
  			navigator.geolocation.getCurrentPosition(function (position) {
  				initialLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
  				map.setCenter(initialLocation);
  			});
  		}

  		google.maps.event.addListener(map, 'click', function(event) {

  			$(product_longitude).val(event.latLng.lng());
  			$(product_latitude).val(event.latLng.lat())   
   //alert(event.latLng);
   
   placeMarker(event.latLng);
});
  	}

  	function clearOverlays() {
  		for (var i = 0; i < markersArray.length; i++ ) {
  			markersArray[i].setMap(null);
  		}
  		markersArray = [];
  	}

  	function placeMarker(location) {
  		clearOverlays();
  		var marker = new google.maps.Marker({
  			position: location,
  			map: map,
  		});
  		markersArray.push(marker);

  		
  	}

  	var geocoder;

  	function codeAddress() {
  		address = $("#product_region").val();
  		geocoder = new google.maps.Geocoder();
  		geocoder.geocode({
  			'address': address
  		}, function(results, status) {
  			if (status == google.maps.GeocoderStatus.OK) {
  				var myOptions = {
  					zoom: 12,  					
  					center: results[0].geometry.location,
  					mapTypeId: google.maps.MapTypeId.ROADMAP
  				}
  				map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);


  				google.maps.event.addListener(map, 'click', function(event) {

  					$(product_longitude).val(event.latLng.lng());
  					$(product_latitude).val(event.latLng.lat())   
   //alert(event.latLng);
   placeMarker(event.latLng);
});


  			}
  		});
  	}

  	google.maps.event.addDomListener(window, 'load', initialize);
  </script>

  <%= form_for @product_suggestion, :url => { :action => 'set_suggestion' } do |f| %>
  <% if @product_suggestion.errors.any? %>
  <div id="error_explanation">
  	<h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

  	<ul>
  		<% @product.errors.full_messages.each do |msg| %>
  		<li><%= msg %></li>
  		<% end %>
  	</ul>
  </div>
  <% end %>
  <h1>Suggest us a delicious portuguese food</h1>
  <div class="field">
  	<%= f.label :name %><br />
  	<%= f.text_field :name %>
  </div>
  <div class="field">
  	<%= f.label :region %><br />
  	<%= f.text_field :region %>
  	<input type="button" onclick="codeAddress()" value="search"/>
  	<div id="map-canvas"/>
  </div>
  <div class="field">
  	<%= f.label :description %><br />
  	<%= f.text_area :description %>
  </div>
  <div class="field">
  	<%= f.label :photo %><br />
  	<%= f.text_field :photo %>
  </div>
  <div class="field">
  	<%= f.label :hashtag %><br />
  	<%= f.text_field :hashtag %>
  </div>
  <div class="field">
  	<%= f.label :category_id %><br />
  	<%= f.select(:category_id, options_for_select(@categories, @product_suggestion.category_id)) %>
  </div>

  
  <%= f.hidden_field :longitude %>
  
  
  <%= f.hidden_field :latitude %>

  <div class="actions">
  	<%= f.submit %>
  </div>
  <% end %>
  